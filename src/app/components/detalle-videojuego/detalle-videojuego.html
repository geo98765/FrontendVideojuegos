<div class="detalle-container">
  @if (videojuego) {
    <div class="header-section">
      <a routerLink="/videojuegos" mat-button>
        <mat-icon>arrow_back</mat-icon>
        Volver a la lista
      </a>
    </div>

    <mat-card class="main-card">
      <div class="videojuego-header">
        <div class="image-section">
            <img [src]="videojuego.urlImg" [alt]="videojuego.nombre" class="caratula-grande">
        </div>

        <div class="info-section">
          <h1>{{videojuego.nombre}}</h1>
          
          <div class="stats-chips">
            <mat-chip-set>
              <mat-chip>
                {{videojuego.tamanoGb}} GB
              </mat-chip>
              <mat-chip>
                {{videojuego.descargas}} descargas
              </mat-chip>
              <mat-chip highlighted>
                {{videojuego.precio | currency}}
              </mat-chip>
            </mat-chip-set>
          </div>

          <mat-divider></mat-divider>

          <div class="description">
            <h3>Descripci√≥n</h3>
            <p>{{videojuego.descripcion}}</p>
          </div>

          <div class="extra-info">
            <p>Agregado: {{videojuego.creadoEn | date:'dd/MM/yyyy'}}</p>
            <p>Total de compras: {{videojuego.totalCompras}}</p>
          </div>

          <div class="action-buttons">
            <a routerLink="/videojuegos/actualizar/{{videojuego.id}}" mat-flat-button color="primary">
              <mat-icon>edit</mat-icon>
              Editar
            </a>
            <a routerLink="/videojuegos/eliminar/{{videojuego.id}}" mat-stroked-button color="warn">
              <mat-icon>delete</mat-icon>
              Eliminar
            </a>
          </div>
        </div>
      </div>
    </mat-card>

    <mat-card class="comentarios-card">
      <mat-card-header>
        <mat-card-title>Comentarios ({{videojuego.comentarios?.length || 0}})</mat-card-title>
      </mat-card-header>
      <mat-card-content>
        @if (videojuego.comentarios && videojuego.comentarios.length > 0) {
          <div class="comentarios-list">
            @for (comentario of videojuego.comentarios; track comentario.comentarioId) {
              <div class="comentario-item">
                <div class="comentario-header">
                  <strong>{{comentario.nombreUsuario}}</strong>
                  <span class="fecha">{{comentario.fecha | date:'dd/MM/yyyy HH:mm'}}</span>
                </div>
                <p class="comentario-texto">{{comentario.comentario}}</p>
                <mat-divider></mat-divider>
              </div>
            }
          </div>
        } @else {
          <p class="no-comentarios">No hay comentarios para este videojuego.</p>
        }
      </mat-card-content>
      <mat-card-actions>
        <a routerLink="/comentarios/crear" mat-flat-button color="accent">
          <mat-icon>add_comment</mat-icon>
          Agregar Comentario
        </a>
      </mat-card-actions>
    </mat-card>
  }
</div>